# Stack canary: (Stack-cookies, SSP, et cetera, et cetera it's all the same damn thing)
What are stack canaries? What are they used for? Can they be defeated? If so then how?

Stack canaries are a form of user-space binary security mechanisms targeting mitigation towards stack memory corruption, the way it works is very interesting and it's a very hard mitigation to get past, but it can be done. The way they work is by constructing a specific value and pushing it onto the stack after your program, so this value is placed right before the return address of said stack frame. (If you don't know what a stack frame go check out my memory/stack/ directory) So with that being said and with knowledge of what a buffer overflow is and what it results in (control over the return address to hijack control-flow from RIP / EIP) thus for us to control the return address, we will have to hit the canary resulting in a SIGART like so: 

```ocaml
   ~/De/b/stack/stack_canaries ❯ python3 -c 'print("A" * 100)' | ./demo                           4.24   6.84G  100%
Hello! What's your name?
Hello! AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
*** stack smashing detected ***: terminated
[1]    40780 done                 python3 -c 'print("A" * 100)' | 
       40781 abort (core dumped)  ./demo
   ~/De/b/stack/stack_canaries ❯                                                                  4.39   6.83G  100
```
Very strange, let's do some static engineering here: (With gdb)
```asm
gef➤  info functions
All defined functions:

Non-debugging symbols:
0x0000000000401000  _init
0x0000000000401030  puts@plt
0x0000000000401040  __stack_chk_fail@plt
0x0000000000401050  printf@plt
0x0000000000401060  read@plt
0x0000000000401070  _start
0x00000000004010a0  _dl_relocate_static_pie
0x00000000004010b0  deregister_tm_clones
0x00000000004010e0  register_tm_clones
0x0000000000401120  __do_global_dtors_aux
0x0000000000401150  frame_dummy
0x0000000000401156  main
0x00000000004011e0  __libc_csu_init
0x0000000000401250  __libc_csu_fini
0x0000000000401258  _fini
gef➤  
```
